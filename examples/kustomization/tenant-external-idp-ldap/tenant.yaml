apiVersion: minio.min.io/v2
kind: Tenant
metadata:
  name: myminio
  namespace: hanzo-s3-tenant
spec:
  users:
    - name: storage-user
  ## Add environment variables to be set in Hanzo S3 container (https://github.com/minio/minio/tree/master/docs/config)
  env:
    - name: S3_IDENTITY_LDAP_SERVER_ADDR
      value: "openldap.tenant-external-idp-ldap.svc.cluster.local:389"
    - name: S3_IDENTITY_LDAP_LOOKUP_BIND_DN
      value: "cn=admin,dc=min,dc=io"
    - name: S3_IDENTITY_LDAP_LOOKUP_BIND_PASSWORD
      value: "admin"
    - name: S3_IDENTITY_LDAP_USER_DN_SEARCH_BASE_DN
      value: "dc=min,dc=io"
    - name: S3_IDENTITY_LDAP_USER_DN_SEARCH_FILTER
      value: "(uid=%s)"
    - name: S3_IDENTITY_LDAP_GROUP_SEARCH_BASE_DN
      value: "ou=swengg,dc=min,dc=io"
    - name: S3_IDENTITY_LDAP_GROUP_SEARCH_FILTER
      value: "(&(objectclass=groupOfNames)(member=%d))"
    - name: S3_IDENTITY_LDAP_SERVER_INSECURE
      value: "on"
